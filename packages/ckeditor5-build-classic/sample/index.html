<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>CKEditor 5 – classic editor build – development sample</title>
	<style>
		body {
			max-width: 800px;
			margin: 20px auto;
		}
	</style>
</head>
<body>

<h1>CKEditor 5 – classic editor build – development sample</h1>

<div id="editor">
	<h2>Sample</h2>

	<p>This is an instance of the <a href="https://ckeditor.com/docs/ckeditor5/latest/builds/guides/overview.html#classic-editor">classic editor build</a>.</p>

	<figure class="image">
		<img src="../tests/manual/sample.jpg" alt="Autumn fields" />
	</figure>

	<p>You can use this sample to validate whether your <a href="https://ckeditor.com/docs/ckeditor5/latest/builds/guides/development/custom-builds.html">custom build</a> works fine.</p>
</div>

<div id="prv-src">
NA
</div>
<xmp id="html-src">
No click
</xmp>

<button onclick="setHtmlSrc()">Set Html Src</button>

<!-- <script src="https://ckeditor.com/apps/ckfinder/3.4.5/ckfinder.js"></script> -->
<script src="../build/ckeditor.js"></script>
<script>

	function setHtmlSrc() {
		document.querySelector('#html-src').innerHTML = editor.getData();
		document.querySelector('#prv-src').innerHTML = editor.getData();
	}

	// class VideoUploadAdapter {
	// 	constructor(loader) {
	// 		this.loader = loader;
	// 	}

	// 	upload() {
	// 		const uploadVideo = async (file) => {
	// 			this.loader.uploaded = false;
	// 			return new Promise((resolve) => {
	// 				setTimeout(() => {
	// 					this.loader.uploaded = true;
	// 					resolve({ default: 'http://localhost/dummy-data/file_example_MP4_480_1_5MG.mp4' });
	// 				}, 2000);
	// 			});
	// 		};

	// 		return this.loader.file.then((file) => uploadVideo(file));
	// 	}

	// 	abort() {
	// 		return Promise.reject();
	// 	}
	// }

	// function VideoUploadAdapterPlugin(editor) {
	// 	editor.plugins.get('FileRepository').createUploadAdapter = (loader) => {
	// 		return new VideoUploadAdapter(loader);
	// 	};
	// }

	

	ClassicEditor.create( document.querySelector( '#editor' ), {
		// extraPlugins: [VideoUploadAdapterPlugin],
		toolbar: {
			items: [
				'videoUpload',
				'undo',
				'redo',
				'heading',
				'alignment',
				'-',
				'link',
				'insertTable',
				'uploadImage',
				'imageInsert',
				'mediaEmbed',
				'cKFinder',
				'|',
				'bold',
				'italic',
				'underline',
				'strikethrough',
				'subscript',
				'superscript',
				'horizontalLine',
				'blockQuote',

				'outdent',
				'indent',

				'fontBackgroundColor',
				'fontColor',
				'fontSize',
				'fontFamily',

				'bulletedList',
				'numberedList',
				'todoList',

				'MathType',
				'ChemType',
				'specialCharacters',
				'code',
				'codeBlock',
				'htmlEmbed',
				'pageBreak',
			],
			shouldNotGroupWhenFull: true,
			// viewportTopOffset: window.getViewportTopOffsetConfig()
		},
		mediaEmbed: { previewsInData: true },
		// mathTypeParameters : {
        //     serviceProviderProperties : {
        //         URI : 'http://localhost/demo/math_type',
        //         server : 'php'
        //     }
		// },
		simpleUpload: {
			// The URL that the images are uploaded to.
			uploadUrl: 'http://localhost/office/enterprise3-hiren/backend/web/site/draft-upload-ckeditor',
			// uploadUrl: 'http://localhost/dummy-data/file_example_MP4_480_1_5MG.mp4',

			// Enable the XMLHttpRequest.withCredentials property.
			withCredentials: false,

			// Headers sent along with the XMLHttpRequest to the upload server.
			// headers: {
			// 	'X-CSRF-TOKEN': 'CSRF-Token',
			// 	Authorization: 'Bearer <JSON Web Token>'
			// }
		},
		video: {
			upload: {
				types: ['mp4'],
				allowMultipleFiles: false,
			},
			styles: [
				'alignLeft', 'alignCenter', 'alignRight'
			],

			// Configure the available video resize options.
			resizeOptions: [
				{
					name: 'videoResize:original',
					label: 'Original',
					icon: 'original'
				},
				{
					name: 'videoResize:50',
					label: '50',
					icon: 'medium'
				},
				{
					name: 'videoResize:75',
					label: '75',
					icon: 'large'
				}
			],

			// You need to configure the video toolbar, too, so it shows the new style
			// buttons as well as the resize buttons.
			toolbar: [
				'videoStyle:alignLeft', 'videoStyle:alignCenter', 'videoStyle:alignRight',
				'|',
				'videoResize:50',
				'videoResize:75',
				'videoResize:original'
			]
		}
		// ckfinder: {
		// 	// Open the file manager in the pop-up window.
		// 	openerMethod: 'popup'
		// }
	})
		.then( editor => {
			window.editor = editor;
		} )
		.catch( error => {
			console.error( 'There was a problem initializing the editor.', error );
		} );
</script>

</body>
</html>
